<!DOCTYPE html>
<html>
<head>
  <title>Uploaded Homework Files</title>
  <!-- Include Firebase SDK -->
  <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-storage.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-firestore.js"></script>
  <style>
    body {
      font-family: "Lato", sans-serif;
      text-align: center;
    }

    h1 {
      color: red; /* Change the text color to red */
    }

    /* Additional styles for the file list */
    .file-list {
      margin-top: 50px;
      max-width: 600px;
      margin: 50px auto;
      padding: 20px;
      border: 1px solid #ddd;
      border-radius: 5px;
      box-shadow: 0 0 5px #ccc;
    }

    .file-list li {
      list-style-type: none;
      margin-bottom: 10px;
    }
  </style>
  <script>
    // Your Firebase configuration object
    var firebaseConfig = {
      apiKey: "AIzaSyAqL2Qw8PMsvF_68VlNxCaKKt9ldTClbP4",
      authDomain: "upload-372ff.firebaseapp.com",
      projectId: "upload-372ff",
      storageBucket: "upload-372ff.appspot.com",
      messagingSenderId: "967062218795",
      appId: "1:967062218795:web:083e9c6a2ebdf2b7d8626e",
      measurementId: "G-VBJ93FPBJ5"
    };

    // Initialize Firebase
    firebase.initializeApp(firebaseConfig);

    // Reference to Firebase Cloud Storage
    var storageRef = firebase.storage().ref();

    // Get a reference to Firestore
    var db = firebase.firestore();

    // Function to display uploaded files
    function displayUploadedFiles() {

      // Get the list of uploaded files from Firestore
      db.collection("uploadedFiles").get().then(function(querySnapshot) {
        querySnapshot.forEach(function(doc) {
          var fileMetadata = doc.data();

          // Get the download URL of the file from Firebase Storage
          storageRef.child(fileMetadata.fullPath).getDownloadURL().then(function(url) {
            // Create a new list item for the file and append it to the file list
            const fileList = document.querySelector(".file-list ul");
            const listItem = document.createElement("li");
            const downloadLink = document.createElement("a");
            downloadLink.href = url;
            downloadLink.textContent = fileMetadata.name;
            listItem.appendChild(downloadLink);
            fileList.appendChild(listItem);
          }).catch(function(error) {
            console.error("Error getting file download URL:", error);
          });
        });
      }).catch(function(error) {
        console.error("Error getting list of uploaded files:", error);
      });
    }

    // Call the displayUploadedFiles function when the page loads
    document.addEventListener("DOMContentLoaded", displayUploadedFiles);
  </script>
</head>
<body>
  <h1>Uploaded Homework Files</h1>
  <div class="file-list">
    <ul>
      <!-- The uploaded files will be dynamically added here -->
    </ul>
  </div>
  <a href="/index.html">Go Back to Home</a>
</body>
</html>
